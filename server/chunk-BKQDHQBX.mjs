import './polyfills.server.mjs';
import{A as U,B as _,C,D as y,E as X,F as Y,G as f,L as Z,O as J,Q as ee,R as te,S as ie,V as re,Z as ne,a as V,aa as oe,b as m,c as R,d as E,e as P,f as A,g as j,h as O,i as H,j as g,k as u,l as q,m as D,n as k,o as d,p as $,q as K,r as B,s as F,t as c,u as h,v as w,w as W,x as L,y as p,z as b}from"./chunk-U6Q75BUM.mjs";import{h as Q}from"./chunk-NDYDZJSS.mjs";var M=(o,r)=>Array.from({length:r-o},(a,e)=>o+e);function N(o,r){let a=Math.ceil(o),e=Math.floor(r);return Math.floor(Math.random()*(e-a+1)+a)}var T=(()=>{let r=class r{constructor(e){this.template=e}};r.\u0275fac=function(t){return new(t||r)(u(q))},r.\u0275dir=R({type:r,selectors:[["","gridContent",""]],standalone:!0});let o=r;return o})();var ge=["content"],be=(o,r)=>"r"+r,Ce=(o,r)=>"c"+r;function ye(o,r){if(o&1&&W(0,3,0),o&2){let a=b(3);d("ngTemplateOutlet",a.contentTemplate.template)}}function ve(o,r){if(o&1&&B(0,ye,2,1,"ng-container",3,Ce),o&2){let a=b(2);F(a.rangeCols)}}function we(o,r){if(o&1&&(c(0,"div",2),B(1,ve,2,0,null,null,be),h()),o&2){let a=b();$("grid-template-columns",a.gridContainerTemplateCols)("grid-template-rows",a.gridContainerTemplateRows),g(),F(a.rangeRows)}}var se=(()=>{let r=class r{constructor(){this.gridInitialized=new O,this.rows=1,this.cols=1,this.rangeRows=[],this.rangeCols=[],this.gridContainerTemplateRows="",this.gridContainerTemplateCols=""}ngOnInit(){this.initialize()}ngOnChanges(){this.initialize()}ngAfterViewChecked(){this.gridInitialized.emit()}initialize(){this.rangeRows=M(0,this.rows),this.rangeCols=M(0,this.cols),this.setGridContainerTemplates()}setGridContainerTemplates(){this.gridContainerTemplateRows=`repeat(${this.rows}, 1fr)`,this.gridContainerTemplateCols=`repeat(${this.cols}, 1fr)`}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=m({type:r,selectors:[["grid"]],contentQueries:function(t,i,n){if(t&1&&U(n,T,5),t&2){let s;C(s=y())&&(i.contentTemplate=s.first)}},viewQuery:function(t,i){if(t&1&&_(ge,5),t&2){let n;C(n=y())&&(i.elements=n)}},inputs:{rows:"rows",cols:"cols"},outputs:{gridInitialized:"gridInitialized"},standalone:!0,features:[E,f],decls:1,vars:1,consts:[["content",""],[1,"container",3,"gridTemplateColumns","gridTemplateRows"],[1,"container"],[3,"ngTemplateOutlet"]],template:function(t,i){t&1&&k(0,we,3,4,"div",1),t&2&&K(i.contentTemplate?0:-1)},dependencies:[ee],styles:[".container[_ngcontent-%COMP%]{width:fit-content;display:grid}"],changeDetection:0});let o=r;return o})();var _e=["top","right","bottom","left","center"],z=(()=>{let r=class r{constructor(e){this.elementRef=e,this.attrs=this.elementRef.nativeElement.attributes,this.style=""}ngOnInit(){let e=this.getSelectors();switch(e[0]){case"top":this.style=this.getTopStyle();break;case"right":this.style=this.getRightStyle();break;case"bottom":this.style=this.getBottomStyle();break;case"left":this.style=this.getLeftStyle();break;case"center":this.style=this.getCenterStyle();break}e[1]&&(e[0]==="top"||e[0]==="bottom"?this.style+=this.horizontalCenteringStyle():e[0]!=="center"&&(this.style+=this.vericalCenteringStyle())),this.setStyle()}getSelectors(){return[..._e].filter(e=>this.attrs.getNamedItem(e))}setStyle(){this.elementRef.nativeElement.setAttribute("style",this.style)}getTopStyle(){return`position: absolute;
    top: 0;
    `}getRightStyle(){return`position: absolute;
    right: 0;
    `}getBottomStyle(){return`position: absolute;
    bottom: 0;
    `}getLeftStyle(){return`position: absolute;
    left: 0;
    `}horizontalCenteringStyle(){return`left: 50%;
    transform: translateX(-50%)`}vericalCenteringStyle(){return`top: 50%;
    transform: translateY(-50%)`}getCenterStyle(){return`position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    `}};r.\u0275fac=function(t){return new(t||r)(u(j))},r.\u0275dir=R({type:r,selectors:[["","top",""],["","right",""],["","bottom",""],["","left",""],["","center",""]],standalone:!0});let o=r;return o})();var Se=["box"],le=(()=>{let r=class r{constructor(e,t){this.renderer=e,this.directive=t,this.event=new O,this.label="",this.key="",this.disabled=!1,this.tooltip=""}handleClick(){this.event.emit()}handleKeyDown(e){!this.disabled&&e.key===this.key&&this.event.emit()}ngAfterViewInit(){this.setStyle("box"),this.directive&&this.setStyle(this.directive.getSelectors()[0])}setStyle(e){this.renderer.addClass(this.box.nativeElement,e)}};r.\u0275fac=function(t){return new(t||r)(u(D),u(z))},r.\u0275cmp=m({type:r,selectors:[["edge-button"]],viewQuery:function(t,i){if(t&1&&_(Se,5),t&2){let n;C(n=y())&&(i.box=n.first)}},hostBindings:function(t,i){t&1&&p("click",function(s){return i.handleClick(s)})("keydown",function(s){return i.handleKeyDown(s)},!1,H)},inputs:{label:"label",key:"key",disabled:"disabled",tooltip:"tooltip"},outputs:{event:"event"},standalone:!0,features:[f],decls:4,vars:3,consts:[["box",""],[3,"disabled","title"],[1,"symbol"]],template:function(t,i){t&1&&(c(0,"button",1,0)(2,"span",2),X(3),h()()),t&2&&(d("disabled",i.disabled)("title",i.tooltip),g(3),Y(i.label))},styles:["*[_ngcontent-%COMP%]{--background-color: #B9D6F2;--color: #003559}.box[_ngcontent-%COMP%]{box-sizing:border-box;background:radial-gradient(circle,var(--background-color) 0%,rgba(0,0,0,0) 90%);opacity:15%;transition:opacity .5s;border:none;display:flex;-webkit-user-select:none;-ms-user-select:none;user-select:none;color:var(--color)}.box[_ngcontent-%COMP%]:not(:disabled){cursor:pointer}.box[_ngcontent-%COMP%]:hover:not(:disabled){opacity:100%}.symbol[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;font-weight:700;font-size:50px}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{width:80vw;height:100px;justify-content:center;align-items:center}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{width:100px;height:80vh;justify-content:center;align-items:center}.top[_ngcontent-%COMP%]{border-radius:50%/0 0 100% 100%}.bottom[_ngcontent-%COMP%]{border-radius:50%/100% 100% 0 0}.left[_ngcontent-%COMP%]{border-radius:0 100% 100% 0/50%}.right[_ngcontent-%COMP%]{border-radius:100% 0 0 100%/50%}"]});let o=r;return o})();var ae=(()=>{let r=class r{constructor(){this.rows=1,this.cols=1,this.arr=[],this.possibleNumbers=[],this.notEmptyCells=0,this.possibleCells=[]}setSize(e,t){this.rows=e,this.cols=t,this.fillPossibleNumbers()}initialize(){this.arr=[];let e=this.rows*this.cols;for(let s=0;s<e;s++)this.arr[s]=Array.from(Array(e),()=>0);let t=Math.floor(Math.log10(e)*e+e),i=Math.floor(t/2),n=t+i;e>=9?this.notEmptyCells=N(65,73):this.notEmptyCells=N(n,n+i),this.fillPossibleCells()}fillPossibleNumbers(){this.possibleNumbers=M(1,this.rows*this.cols+1)}fillPossibleCells(){this.possibleCells=[];for(let e=0;e<this.arr.length;e++)for(let t=0;t<this.arr.length;t++)this.possibleCells.push([e,t])}generate(){return Q(this,null,function*(){this.initialize(),this.solve(this.arr);let e=[];return e=structuredClone(this.arr),this.removeCells(e),e})}solve(e,t=0,i=0){let n=this.getEmptyCell(e,t,i);if(n.length===0)return!0;t=n[0],i=n[1];let s=this.getNumber(),l=[];for(;s!==0;){if(this.checkLocation(e,t,i,s)){if(e[t][i]=s,this.solve(e,t,i+1))return!0;e[t][i]=0}l.push(s),s=this.getNumber(this.possibleNumbers.filter(x=>!l.includes(x)))}return!1}getEmptyCell(e,t,i){if(i>e.length-1&&(i=0,t++),t>e.length-1)return[];for(let n=t;n<e.length;n++){let s=e[n].indexOf(0);if(n===t&&i===s)return[t,i];if(s!==-1)return t=n,i=s,[t,i]}return[]}checkLocation(e,t,i,n){return!this.inRow(e[t],n)&&!this.inColumn(e,i,n)&&!this.inGrid(e,t,i,n)}inRow(e,t){return e.includes(t)}inColumn(e,t,i){return e.some(n=>n[t]===i)}inGrid(e,t,i,n){let s=t%this.rows,l=t-s,x=l+this.rows-1,G,I=i%this.cols,S=i-I,fe=S+this.cols-1;for(;l<x;){if(G=e[l].slice(S,fe+1),this.inRow(G,n))return!0;l++}return!1}getNumber(e){if(e||(e=this.possibleNumbers),e.length===0)return 0;let t=Math.floor(Math.random()*this.possibleNumbers.length);return this.possibleNumbers[t]}removeCells(e){if(this.getNotEmptyCells(e)===this.notEmptyCells)return!0;let i=this.getCell(),n=e[i[0]][i[1]];this.possibleCells.splice(this.possibleCells.findIndex(l=>l[0]===i[0]&&l[1]===i[1]),1),e[i[0]][i[1]]=0;let s=structuredClone(e);return this.solve(s)&&this.compareArray(s)&&this.removeCells(e)?!0:(e[i[0]][i[1]]=n,this.possibleCells.push(i),this.removeCells(e))}getNotEmptyCells(e){let t=0;for(let i=0;i<e.length;i++)for(let n=0;n<e.length;n++)e[i][n]!==0&&t++;return t}getCell(){let e=Math.floor(Math.random()*this.possibleCells.length);return this.possibleCells[e]}compareArray(e){for(let t=0;t<this.arr.length;t++)for(let i=0;i<this.arr.length;i++)if(this.arr[t][i]!==e[t][i])return!1;return!0}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var Me=["container"];function Ge(o,r){o&1&&w(0,"input",5)}function Ie(o,r){if(o&1){let a=L();c(0,"grid",3),p("gridInitialized",function(){P(a);let t=b();return A(t.onGridInitialized())}),k(1,Ge,1,0,"input",4),h()}if(o&2){let a=b();d("rows",a.innerRowGrid)("cols",a.innerColGrid)}}var de=(()=>{let r=class r{constructor(e,t){this.renderer=e,this.sudokuService=t,this.debouncedGenerateBoard=this.debounce(()=>this.generateBoard(),300),this.arr=[],this.rows=1,this.cols=1,this.cells=1,this.outerRowGrid=1,this.outerColGrid=1,this.innerRowGrid=1,this.innerColGrid=1,this.process=!1,this.gridInitializedCount=0}ngOnChanges(e){(e.rows&&!e.rows.isFirstChange()||e.cols&&!e.cols.isFirstChange())&&(this.initialize(),this.process=!0)}ngOnInit(){this.initialize()}onGridInitialized(){this.gridInitializedCount++}ngAfterViewInit(){this.postGridInitialized(!1)}ngAfterViewChecked(){this.process&&this.postGridInitialized()}postGridInitialized(e=!0){this.gridInitializedCount>0&&(this.gridInitializedCount=0,this.stylizeBoard(),e?this.debouncedGenerateBoard():this.generateBoard())}initialize(){this.cells=this.rows*this.cols,this.outerRowGrid=this.cells!==this.rows?this.cells/this.rows:this.cells,this.outerColGrid=this.cells!==this.cols?this.cells/this.cols:this.cells,this.innerRowGrid=this.cells/this.outerRowGrid,this.innerColGrid=this.cells/this.outerColGrid}generateBoard(){this.sudokuService.setSize(this.rows,this.cols),this.sudokuService.generate().then(e=>{this.fillBoard(e)})}stylizeBoard(){this.resetStyle(),this.container.elements.forEach((e,t,i)=>{let n=e.nativeElement.previousElementSibling,s="",l=0;switch(t){case 0:s="top-left-corner",l=0;break;case this.outerColGrid-1:s="top-right-corner",l=this.innerColGrid-1;break;case i.length-1-(this.outerColGrid-1):s="bottom-left-corner",l=this.innerRowGrid*this.innerColGrid-1-(this.innerColGrid-1);break;case i.length-1:s="bottom-right-corner",l=this.innerRowGrid*this.innerColGrid-1;break}if(s.length>0&&this.addClass(n,s,l),this.outerRowGrid*this.outerColGrid===1){this.addClass(n,"top-left-corner",0),this.addClass(n,"top-right-corner",0),this.addClass(n,"bottom-left-corner",0),this.addClass(n,"bottom-right-corner",0);return}})}fillBoard(e){let t=0,i=0,n=0;this.container.elements.forEach(s=>{let l=s.nativeElement.previousElementSibling,x=i,G=t;Array.from(l.querySelectorAll("input")).forEach(I=>{let S=e[t][i].toString();S!=="0"&&(I.value=S,this.renderer.setAttribute(I,"disabled","true")),i++,n++,n>=this.innerColGrid&&(i=x,n=0,t++)}),i+=this.innerColGrid,i>=this.cells?i=0:t>=this.innerRowGrid&&(t=G)})}resetStyle(){this.container.elements.forEach(e=>{let t=e.nativeElement.previousElementSibling;this.removeCornerClasses(t),Array.from(t.querySelectorAll("input")).forEach(i=>{this.removeCornerClasses(i),i.value="",this.renderer.removeAttribute(i,"disabled")})})}removeCornerClasses(e){Array.from(e.classList).forEach(t=>{t.endsWith("corner")&&this.renderer.removeClass(e,t)})}getNumber(e){let t=1;for(let i=0;i<e;i++)t+=2;return t}addClass(e,t,i){this.renderer.addClass(e,t),this.renderer.addClass(e.querySelectorAll("input")[i],t)}debounce(e,t){return()=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{e.apply(this)},t)}}};r.\u0275fac=function(t){return new(t||r)(u(D),u(ae))},r.\u0275cmp=m({type:r,selectors:[["sudoku"]],viewQuery:function(t,i){if(t&1&&_(Me,5),t&2){let n;C(n=y())&&(i.container=n.first)}},inputs:{rows:"rows",cols:"cols"},standalone:!0,features:[E,f],decls:3,vars:2,consts:[["container",""],[1,"container",3,"gridInitialized","rows","cols"],["class","inner-container",3,"rows","cols","gridInitialized",4,"gridContent"],[1,"inner-container",3,"gridInitialized","rows","cols"],["type","number","class","box",4,"gridContent"],["type","number",1,"box"]],template:function(t,i){if(t&1){let n=L();c(0,"grid",1,0),p("gridInitialized",function(){return P(n),A(i.onGridInitialized())}),k(2,Ie,2,2,"grid",2),h()}t&2&&d("rows",i.outerRowGrid)("cols",i.outerColGrid)},dependencies:[se,T],styles:["*[_ngcontent-%COMP%]{--border-radius: 15px;--inner-border-radius: calc(var(--border-radius) - 5px);--inner-border-radius-input: calc(var(--border-radius) - 7px);--box-size: 40px;--color: #0353A4}.container[_ngcontent-%COMP%]{border-radius:var(--border-radius);border:3px solid var(--color);display:inline-block}.inner-container[_ngcontent-%COMP%]{border:2px solid var(--color)}.box[_ngcontent-%COMP%]{border:1px dashed var(--color)}.top-left-corner[_ngcontent-%COMP%]{border-top-left-radius:var(--inner-border-radius)}.top-left-corner[_ngcontent-%COMP%]   input.top-left-corner[_ngcontent-%COMP%]{border-top-left-radius:var(--inner-border-radius-input)}.top-right-corner[_ngcontent-%COMP%]{border-top-right-radius:var(--inner-border-radius)}.top-right-corner[_ngcontent-%COMP%]   input.top-right-corner[_ngcontent-%COMP%]{border-top-right-radius:var(--inner-border-radius-input)}.bottom-left-corner[_ngcontent-%COMP%]{border-bottom-left-radius:var(--inner-border-radius)}.bottom-left-corner[_ngcontent-%COMP%]   input.bottom-left-corner[_ngcontent-%COMP%]{border-bottom-left-radius:var(--inner-border-radius-input)}.bottom-right-corner[_ngcontent-%COMP%]{border-bottom-right-radius:var(--inner-border-radius)}.bottom-right-corner[_ngcontent-%COMP%]   input.bottom-right-corner[_ngcontent-%COMP%]{border-bottom-right-radius:var(--inner-border-radius-input)}input[_ngcontent-%COMP%]{width:var(--box-size);height:var(--box-size);text-align:center;border:none;font-size:20px;font-family:Trebuchet MS;background-color:transparent}input[type=number][_ngcontent-%COMP%]{appearance:textfield}"],changeDetection:0});let o=r;return o})();var ce=(()=>{let r=class r{constructor(){this.rows=1,this.cols=3,this.maxLimit=3,this.minLimit=1,this.disableDict={top:this.rows===this.minLimit,right:this.cols===this.maxLimit,bottom:this.rows===this.maxLimit,left:this.cols===this.minLimit}}add(e){switch(e){case"row":this.rows<this.maxLimit&&(this.rows=this.disableDict.bottom?this.rows:this.rows+1,this.disableDict.top=!1),this.rows===this.maxLimit&&(this.disableDict.bottom=!0);break;case"col":this.cols<this.maxLimit&&(this.cols=this.disableDict.right?this.cols:this.cols+1,this.disableDict.left=!1),this.cols===this.maxLimit&&(this.disableDict.right=!0);break}}remove(e){switch(e){case"row":this.rows>=this.minLimit&&(this.rows--,this.disableDict.bottom=!1),this.rows===this.minLimit&&(this.disableDict.top=!0);break;case"col":this.cols>=this.minLimit&&(this.cols--,this.disableDict.right=!1),this.cols===this.minLimit&&(this.disableDict.left=!0);break}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=m({type:r,selectors:[["game-board"]],standalone:!0,features:[f],decls:5,vars:14,consts:[["center","",3,"rows","cols"],["top","","center","","tooltip","Eliminar fila",3,"event","label","key","disabled"],["right","","center","","tooltip","A\xF1adir columna",3,"event","label","key","disabled"],["bottom","","center","","tooltip","A\xF1adir fila",3,"event","label","key","disabled"],["left","","center","","tooltip","Eliminar columna",3,"event","label","key","disabled"]],template:function(t,i){t&1&&(w(0,"sudoku",0),c(1,"edge-button",1),p("event",function(){return i.remove("row")}),h(),c(2,"edge-button",2),p("event",function(){return i.add("col")}),h(),c(3,"edge-button",3),p("event",function(){return i.add("row")}),h(),c(4,"edge-button",4),p("event",function(){return i.remove("col")}),h()),t&2&&(d("rows",i.rows)("cols",i.cols),g(),d("label","-")("key","ArrowUp")("disabled",i.disableDict.top),g(),d("label","+")("key","ArrowRight")("disabled",i.disableDict.right),g(),d("label","+")("key","ArrowDown")("disabled",i.disableDict.bottom),g(),d("label","-")("key","ArrowLeft")("disabled",i.disableDict.left))},dependencies:[de,le,z]});let o=r;return o})();var he=(()=>{let r=class r{constructor(){this.title="Sudoku"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=m({type:r,selectors:[["app-root"]],standalone:!0,features:[f],decls:2,vars:0,template:function(t,i){t&1&&w(0,"game-board")(1,"router-outlet")},dependencies:[ne,ce]});let o=r;return o})();var me=[];var ue={providers:[Z({eventCoalescing:!0}),oe(me),ie()]};var Re={providers:[re()]},pe=J(ue,Re);var Ee=()=>te(he,pe),Tt=Ee;export{Tt as a};
